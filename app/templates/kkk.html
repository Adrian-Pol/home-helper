{% extends "base.html" %}

{% block title %}Cele{% endblock %}
{% block content %}
<h1 style="text-align:center;">Witaj, {{ username }}!</h1>
<p style="text-align:center;">Tutaj będą twoje cele.</p>

<div
    id = "goal-view"
    data-goalview-url="{{url_for('api_get_goals')}}">
    
</div>

    
{% endblock %}
{% block scripts %}
{% for css in react_css %}
  <link rel="stylesheet" href="{{ url_for('static', path='react/' + css) }}">
{% endfor %}

{# Wczytaj plik JS React #}
<script type="module" src="{{ url_for('static', path='react/' + react_js) }}"></script>
<!--<script>
    async function usunCel() {
        const select = document.getElementById('goal_select');
        const goalId = select.value;
        if (!goalId){
            alert("Wybierz cel do usunięcia.");
            return;
        }
        const response = await fetch(`/cele/${goalId}`,{
            method: "DELETE",
        });

        if (response.ok) {
            alert("Usunięto cel");
            location.reload();
        } else {
            alert("Błąd przy usuwaniu");
        }
        
    }
    async function dodajCel() {
        const celetext = document.getElementById("cele").value;
        const ocenaint = document.getElementById("ocena").value;
        

        if (!celetext || !ocenaint){
            alert("Dostarcz wymagane dane");
            return;
        }
        const response = await fetch(`/cele`,{
            method : "POST",
            headers: {
            "Content-Type": "application/x-www-form-urlencoded"
        },
            body: new URLSearchParams({
                cele: celetext,
                ocena: ocenaint
            })
        });
        if (response.ok) {
            alert("Dodano cel");
            location.reload();
        } else {
            alert("Błąd przy dodawaniu");
        }
        }
async function refreshGoals() {
    const grid = document.getElementById("goalsGrid");
    grid.innerHTML = "";

    try {
        const response = await fetch("/api/cele");
        if (!response.ok) throw new Error("Błąd API");

        const data = await response.json();

        data.forEach(goal => {
            const tile = document.createElement("div");
            tile.classList.add("goal-tile");

            const title = document.createElement("div");
            title.textContent = goal.cele;
            tile.appendChild(title);

            const rating = document.createElement("div");
            rating.textContent = "Ocena: " + goal.ocena;
            tile.appendChild(rating);

            grid.appendChild(tile);
        });
    } catch (err) {
        console.error(err);
    }
}

// Odśwież kafelki przy starcie strony
window.addEventListener("DOMContentLoaded", refreshGoals);        
</script>-->
{% endblock %}
